define(["require","exports","module","request","q"],function(e,t,n){n.exports=function(t,n){var r=e("request"),i=e("q"),s=process.env.SAUCE_USERNAME,o=process.env.SAUCE_ACCESS_KEY,u=["https://saucelabs.com/rest/v1",s,"jobs"].join("/"),a={user:s,pass:o},f,l,c;return f=[{browserName:"chrome",platform:"Windows XP"},{browserName:"opera",platform:"Windows XP"},{browserName:"firefox",platform:"Windows XP"},{browserName:"internet explorer",platform:"Windows XP",version:"7"},{browserName:"internet explorer",platform:"Windows XP",version:"8"},{browserName:"internet explorer",platform:"Windows 7",version:"9"},{browserName:"internet explorer",platform:"Windows 8",version:"10"}],l=[],["1.8.3","1.10.2"].forEach(function(e){["1.8.24","1.9.2","1.10.4","1.11.0"].forEach(function(t){["2.2.0","3.1.0"].forEach(function(n){var r;if(e==="1.8.3"||t!=="1.8.24")r=["jquery="+e,"jqueryui="+t,"knockout="+n].join("&"),l.push("http://127.0.0.1:9999/spec/runner-all.html?"+r)})})}),c=function(e,n){var s=e.job_id;return i.nfcall(r,{uri:[u,s,"assets/selenium-server.log"].join("/"),auth:a,json:{}}).then(function(e){var n,o,f,l;n=e[0],o=e[1];if(n.statusCode!==200){t.log.error(["GET",[u,s,"assets/selenium-server.log"].join("/"),"->",n.statusCode].join(" "));return}f=/runner-all\.html\?jquery=([\d\.]+)&jqueryui=([\d\.]+)&knockout=([\d\.]+)/,l=o.match(f);if(l)return i.nfcall(r.put,{uri:[u,s].join("/"),auth:a,json:{tags:["jq:"+l[1],"jqui:"+l[2],"ko:"+l[3]]}}).fail(function(e){t.log.error(["PUT",[u,s].join("/"),"->",e.stack].join(" "))});t.log.error(["GET",[u,s,"assets/selenium-server.log"].join("/"),"->","Unexpected log format"].join(" "))},function(e){t.log.error(["GET",[u,s,"assets/selenium-server.log"].join("/"),"->",e.stack].join(" "))}).thenResolve(e.passed).nodeify(n)},{all:{options:{urls:l,build:process.env.TRAVIS_JOB_ID,throttled:5,browsers:f,tunneled:!1,maxRetries:1,maxPollRetries:5,onTestComplete:c,sauceConfig:{"video-upload-on-pass":!1,"record-screenshots":!1,"tunnel-identifier":n.tunnelId}}}}}});