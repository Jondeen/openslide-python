(function(e){var t;define(["jquery"],function(n){return function(){(function(){"use strict";var e;e=function(e){var t=e.offset();return{x:Math.floor(t.left+e.outerWidth()/2),y:Math.floor(t.top+e.outerHeight()/2)}},describe("The slider binding",function(){it("should handle each option of the widget",function(){testWidgetOptions("slider",{animate:[!1,"fast"],disabled:[!1,!0],max:[100,50],min:[0,20],orientation:["horizontal","vertical"],range:[!1,!0],step:[1,2],value:[0,10],values:[null,[10,20]]})}),it("should handle each event of the widget",function(){var e,t;e=$('<div data-bind="slider: { create: createEventHandler }"></div>').prependTo("body"),t={createEventHandler:jasmine.createSpy()},ko.applyBindings(t,e[0]),expect(t.createEventHandler).toHaveBeenCalled(),ko.removeNode(e[0])}),it("should write the widget's value to the viewmodel's bound property when it changes.",function(){var e,t;e=$('<div data-bind="slider: { value: value }"></div>').prependTo("body"),t={value:ko.observable(1)},ko.applyBindings(t,e[0]),expect(t.value.peek()).toEqual(1),e.slider("value",55),expect(t.value.peek()).toEqual(55),ko.removeNode(e[0])}),it("should write the widget's values to the viewmodel's bound property when it changes.",function(){var e,t;e=$('<div data-bind="slider: { values: values }"></div>').prependTo("body"),t={values:ko.observable([1,10])},ko.applyBindings(t,e[0]),expect(t.values.peek()).toEqual([1,10]),e.slider("option","values",[1,6]),expect(t.values.peek()).toEqual([1,6]),ko.removeNode(e[0])}),it("should write the widget's value to the viewmodel's bound property when the values option changes.",function(){var e,t;e=$('<div data-bind="slider: { value: value, values: values }"></div>').prependTo("body"),t={value:ko.observable(30),values:ko.observableArray([30,60])},ko.applyBindings(t,e[0]),expect(t.value.peek()).toEqual(30),e.slider("values",[40,60]),expect(t.value.peek()).toEqual(40),ko.removeNode(e[0])}),it("should write the widget's values to the viewmodel's bound property upon slide event",function(){var e,t;e=$('<div data-bind="slider: { values: values }"></div>').prependTo("body"),t={values:ko.observable([30,50])},ko.applyBindings(t,e[0]),expect(t.values.peek()).toEqual([30,50]),e.find(".ui-slider-handle:eq(0)").simulate("drag",{dx:1e3}),expect(t.values.peek()[0]).toBeGreaterThan(30),expect(t.values.peek()[1]).toEqual(50),e.find(".ui-slider-handle:eq(1)").simulate("drag",{dx:1e3}),expect(t.values.peek()[0]).toBeGreaterThan(30),expect(t.values.peek()[1]).toBeGreaterThan(50),ko.removeNode(e[0])}),it("should update the viewmodel's bound property during the mouse drag",function(){var t,n,r,i,s;t=$('<div data-bind="slider: { value: value, realtime: true }"></div>').prependTo("body"),r={value:ko.observable(30)},ko.applyBindings(r,t[0]),n=t.find(".ui-slider-handle:eq(0)"),i=e(n),s={clientX:i.x,clientY:i.y},expect(r.value.peek()).toEqual(30),n.simulate("mousedown",s),s.clientX+=20,n.simulate("mousemove",s),expect(r.value.peek()).toBeGreaterThan(30),n.simulate("mouseup"),ko.removeNode(t[0])}),it("should update the viewmodel's bound property only when the mouse drag finishes",function(){var t,n,r,i,s;t=$('<div data-bind="slider: { value: value }"></div>').prependTo("body"),r={value:ko.observable(30)},ko.applyBindings(r,t[0]),n=t.find(".ui-slider-handle:eq(0)"),i=e(n),s={clientX:i.x,clientY:i.y},expect(r.value.peek()).toEqual(30),n.simulate("mousedown",s),s.clientX+=20,n.simulate("mousemove",s),expect(r.value.peek()).toEqual(30),n.simulate("mouseup"),expect(r.value.peek()).toBeGreaterThan(30),ko.removeNode(t[0])}),it("should write the element to the widget observable",function(){var e,t,n;e=$('<div data-bind="slider: { widget: widget, disabled: true }"></div>').prependTo("body"),t={widget:ko.observable()},ko.applyBindings(t,e[0]),expect(t.widget()).toBeDefined(),n=t.widget().slider("option","disabled"),expect(n).toBe(!0),ko.removeNode(e[0])}),it("shouldn't set the widget's value option in the slide/slidechange event handler",function(){var t,n,r,i;t=$('<div data-bind="slider: { value: value }"></div>').prependTo("body"),n={value:ko.observable(0)},ko.applyBindings(n,t[0]),spyOn($.fn,"slider").andCallThrough(),r=e(t),i={clientX:r.x,clientY:r.y},t.simulate("mousedown",i),t.simulate("mouseup"),expect(Math.abs(n.value.peek()-50)).toBeLessThan(2),$.each($.fn.slider.calls,function(e,t){expect(t.args[0]==="option"&&t.args[1]==="value"&&t.args.length===3).not.toBe(!0)}),ko.removeNode(t[0])})})})()}.call(e),t})})(this);