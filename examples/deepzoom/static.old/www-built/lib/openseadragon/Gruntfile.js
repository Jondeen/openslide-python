define(["require","exports","module"],function(e,t,n){n.exports=function(e){e.loadNpmTasks("grunt-contrib-compress"),e.loadNpmTasks("grunt-contrib-concat"),e.loadNpmTasks("grunt-contrib-jshint"),e.loadNpmTasks("grunt-contrib-uglify"),e.loadNpmTasks("grunt-contrib-qunit"),e.loadNpmTasks("grunt-contrib-connect"),e.loadNpmTasks("grunt-contrib-watch"),e.loadNpmTasks("grunt-contrib-clean"),e.loadNpmTasks("grunt-git-describe"),e.loadNpmTasks("grunt-text-replace");var t=e.file.readJSON("package.json"),n="build/openseadragon/openseadragon.js",r="build/openseadragon/openseadragon.min.js",i="openseadragon-bin-"+t.version,s="build/"+i+"/",o="../site-build/built-openseadragon/",u=["src/openseadragon.js","src/fullscreen.js","src/eventsource.js","src/mousetracker.js","src/control.js","src/controldock.js","src/viewer.js","src/navigator.js","src/strings.js","src/point.js","src/tilesource.js","src/dzitilesource.js","src/iiiftilesource.js","src/osmtilesource.js","src/tmstilesource.js","src/legacytilesource.js","src/tilesourcecollection.js","src/button.js","src/buttongroup.js","src/rectangle.js","src/referencestrip.js","src/displayrectangle.js","src/spring.js","src/imageLoader.js","src/tile.js","src/overlay.js","src/drawer.js","src/viewport.js"];e.event.once("git-describe",function(t){e.config.set("gitInfo",t)}),e.initConfig({pkg:t,osdVersion:{versionStr:t.version,major:parseInt(t.version.split(".")[0],10),minor:parseInt(t.version.split(".")[1],10),revision:parseInt(t.version.split(".")[2],10)},clean:{build:["build"],"package":[s],release:{src:[o],options:{force:!0}}},concat:{options:{banner:"//! <%= pkg.name %> <%= pkg.version %>\n//! Built on <%= grunt.template.today('yyyy-mm-dd') %>\n//! Git commit: <%= gitInfo %>\n//! http://openseadragon.github.io\n//! License: http://openseadragon.github.io/license/\n\n",process:!0},dist:{src:["<banner>"].concat(u),dest:n}},replace:{cleanPaths:{src:["build/openseadragon/*.map"],overwrite:!0,replacements:[{from:/build\/openseadragon\//g,to:""}]}},uglify:{options:{preserveComments:"some",sourceMap:!0,sourceMapName:"build/openseadragon/openseadragon.min.js.map"},openseadragon:{src:[n],dest:r}},compress:{zip:{options:{archive:"build/releases/"+i+".zip",level:9},files:[{expand:!0,cwd:"build/",src:[i+"/**"]}]},tar:{options:{archive:"build/releases/"+i+".tar.gz",level:9},files:[{expand:!0,cwd:"build/",src:[i+"/**"]}]}},qunit:{all:{options:{timeout:1e4,urls:["http://localhost:8000/test/test.html"]}}},connect:{server:{options:{port:8e3,base:"."}}},watch:{files:["Gruntfile.js","src/*.js","images/*"],tasks:"build"},jshint:{options:{jshintrc:".jshintrc"},beforeconcat:u,afterconcat:[n]},"git-describe":{build:{}}}),e.registerTask("copy:build",function(){e.file.recurse("images",function(t,n,r,i){e.file.copy(t,"build/openseadragon/images/"+(r||"")+i)})}),e.registerTask("copy:package",function(){e.file.recurse("build/openseadragon",function(t,n,r,i){var o=s+(r?r+"/":"/")+i;e.file.copy(t,o)}),e.file.copy("changelog.txt",s+"changelog.txt"),e.file.copy("LICENSE.txt",s+"LICENSE.txt")}),e.registerTask("copy:release",function(){e.file.recurse("build",function(t,n,r,i){if(r==="releases")return;var s=o+(r?r+"/":"/")+i;e.file.copy(t,s)})}),e.registerTask("bower",function(){var n="../site-build/bower.json",r=e.file.readJSON(n);r.version=t.version,e.file.write(n,JSON.stringify(r,null,2)+"\n")}),e.registerTask("build",["clean:build","jshint:beforeconcat","git-describe","concat","jshint:afterconcat","uglify","replace:cleanPaths","copy:build"]),e.registerTask("test",["build","connect","qunit"]),e.registerTask("package",["build","copy:package","compress","clean:package"]),e.registerTask("publish",["package","clean:release","copy:release","bower"]),e.registerTask("default",["build"])}});