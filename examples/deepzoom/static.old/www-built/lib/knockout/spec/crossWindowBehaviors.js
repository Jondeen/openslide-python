(function(e){var t;define([],function(){return function(){describe("Cross-window support",function(){it("Should work in another window",function(){this.after(function(){e.close()});var e=window.open("blank.html","_blank","height=150,location=no,menubar=no,toolbar=no,width=250"),t;waitsFor(function(){return e.document&&e.document.readyState=="complete"&&(t=e.document.body)},5e3),runs(function(){ko.setTemplateEngine(new dummyTemplateEngine({someTemplate:"<div data-bind='text: text'></div>"})),ko.renderTemplate("someTemplate",{text:"abc"},null,t),expect(t.childNodes.length).toEqual(1),expect(t).toContainHtml("<div>abc</div>"),ko.cleanNode(t)}),runs(function(){t.innerHTML="<div data-bind='foreach: someItems'><span data-bind='text: childProp'></span></div>";var e=[{childProp:"first child"},{childProp:"second child"}];ko.applyBindings({someItems:e},t),expect(t.childNodes[0]).toContainHtml('<span data-bind="text: childprop">first child</span><span data-bind="text: childprop">second child</span>'),ko.cleanNode(t)}),runs(function(){var e=ko.observable(undefined);t.innerHTML="<div data-bind='with: someItem'><span data-bind='text: occasionallyExistentChildProp'></span></div>",ko.applyBindings({someItem:e},t),expect(t.childNodes[0].childNodes.length).toEqual(0),e({occasionallyExistentChildProp:"Child prop value"}),expect(t.childNodes[0].childNodes.length).toEqual(1),expect(t.childNodes[0].childNodes[0]).toContainText("Child prop value"),e(null),expect(t.childNodes[0].childNodes.length).toEqual(0),ko.cleanNode(t)})})})}.call(e),t})})(this);