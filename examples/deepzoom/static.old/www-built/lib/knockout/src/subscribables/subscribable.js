(function(e){var t;define([],function(){return function(){ko.subscription=function(e,t,n){this._target=e,this.callback=t,this.disposeCallback=n,this.isDisposed=!1,ko.exportProperty(this,"dispose",this.dispose)},ko.subscription.prototype.dispose=function(){this.isDisposed=!0,this.disposeCallback()},ko.subscribable=function(){ko.utils.setPrototypeOfOrExtend(this,ko.subscribable.fn),this._subscriptions={},this._versionNumber=1};var e="change",t={subscribe:function(t,n,r){var i=this;r=r||e;var s=n?t.bind(n):t,o=new ko.subscription(i,s,function(){ko.utils.arrayRemoveItem(i._subscriptions[r],o),i.afterSubscriptionRemove&&i.afterSubscriptionRemove(r)});return i.beforeSubscriptionAdd&&i.beforeSubscriptionAdd(r),i._subscriptions[r]||(i._subscriptions[r]=[]),i._subscriptions[r].push(o),o},notifySubscribers:function(t,n){n=n||e,n===e&&this.updateVersion();if(this.hasSubscriptionsForEvent(n))try{ko.dependencyDetection.begin();for(var r=this._subscriptions[n].slice(0),i=0,s;s=r[i];++i)s.isDisposed||s.callback(t)}finally{ko.dependencyDetection.end()}},getVersion:function(){return this._versionNumber},hasChanged:function(e){return this.getVersion()!==e},updateVersion:function(){++this._versionNumber},limit:function(t){var n=this,r=ko.isObservable(n),i,s,o,u="beforeChange";n._origNotifySubscribers||(n._origNotifySubscribers=n.notifySubscribers,n.notifySubscribers=function(t,r){!r||r===e?n._rateLimitedChange(t):r===u?n._rateLimitedBeforeChange(t):n._origNotifySubscribers(t,r)});var a=t(function(){r&&o===n&&(o=n()),i=!1,n.isDifferent(s,o)&&n._origNotifySubscribers(s=o)});n._rateLimitedChange=function(e){i=!0,o=e,a()},n._rateLimitedBeforeChange=function(e){i||(s=e,n._origNotifySubscribers(e,u))}},hasSubscriptionsForEvent:function(e){return this._subscriptions[e]&&this._subscriptions[e].length},getSubscriptionsCount:function(e){if(e)return this._subscriptions[e]&&this._subscriptions[e].length||0;var t=0;return ko.utils.objectForEach(this._subscriptions,function(e,n){t+=n.length}),t},isDifferent:function(e,t){return!this.equalityComparer||!this.equalityComparer(e,t)},extend:applyExtenders};ko.exportProperty(t,"subscribe",t.subscribe),ko.exportProperty(t,"extend",t.extend),ko.exportProperty(t,"getSubscriptionsCount",t.getSubscriptionsCount),ko.utils.canSetPrototype&&ko.utils.setPrototypeOf(t,Function.prototype),ko.subscribable.fn=t,ko.isSubscribable=function(e){return e!=null&&typeof e.subscribe=="function"&&typeof e["notifySubscribers"]=="function"},ko.exportSymbol("subscribable",ko.subscribable),ko.exportSymbol("isSubscribable",ko.isSubscribable)}.call(e),t})})(this);