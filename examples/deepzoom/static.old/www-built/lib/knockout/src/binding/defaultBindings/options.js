(function(e){var t;define([],function(){return function(){var e={};ko.bindingHandlers.options={init:function(e){if(ko.utils.tagNameLower(e)!=="select")throw new Error("options binding applies only to SELECT elements");while(e.length>0)e.remove(0);return{controlsDescendantBindings:!0}},update:function(t,n,r){function i(){return ko.utils.arrayFilter(t.options,function(e){return e.selected})}function v(e,t,n){var r=typeof t;return r=="function"?t(e):r=="string"?e[t]:n}function g(n,i,s){s.length&&(d=!f&&s[0].selected?[ko.selectExtensions.readValue(s[0])]:[],m=!0);var o=t.ownerDocument.createElement("option");if(n===e)ko.utils.setTextContent(o,r.get("optionsCaption")),ko.selectExtensions.writeValue(o,undefined);else{var u=v(n,r.get("optionsValue"),n);ko.selectExtensions.writeValue(o,ko.utils.unwrapObservable(u));var a=v(n,r.get("optionsText"),u);ko.utils.setTextContent(o,a)}return[o]}function y(e,n){if(m&&f)ko.selectExtensions.writeValue(t,ko.utils.unwrapObservable(r.get("value")),!0);else if(d.length){var i=ko.utils.arrayIndexOf(d,ko.selectExtensions.readValue(n[0]))>=0;ko.utils.setOptionNodeSelectionState(n[0],i),m&&!i&&ko.dependencyDetection.ignore(ko.utils.triggerEvent,null,[t,"change"])}}var s=t.length==0,o=t.multiple,u=!s&&o?t.scrollTop:null,a=ko.utils.unwrapObservable(n()),f=r.get("valueAllowUnset")&&r.has("value"),l=r.get("optionsIncludeDestroyed"),c={},h,p,d=[];f||(o?d=ko.utils.arrayMap(i(),ko.selectExtensions.readValue):t.selectedIndex>=0&&d.push(ko.selectExtensions.readValue(t.options[t.selectedIndex]))),a&&(typeof a.length=="undefined"&&(a=[a]),p=ko.utils.arrayFilter(a,function(e){return l||e===undefined||e===null||!ko.utils.unwrapObservable(e._destroy)}),r.has("optionsCaption")&&(h=ko.utils.unwrapObservable(r.get("optionsCaption")),h!==null&&h!==undefined&&p.unshift(e)));var m=!1;c.beforeRemove=function(e){t.removeChild(e)};var b=y;r.has("optionsAfterRender")&&typeof r.get("optionsAfterRender")=="function"&&(b=function(t,n){y(t,n),ko.dependencyDetection.ignore(r.get("optionsAfterRender"),null,[n[0],t!==e?t:undefined])}),ko.utils.setDomNodeChildrenFromArrayMapping(t,p,g,c,b),ko.dependencyDetection.ignore(function(){if(f)ko.selectExtensions.writeValue(t,ko.utils.unwrapObservable(r.get("value")),!0);else{var e;o?e=d.length&&i().length<d.length:e=d.length&&t.selectedIndex>=0?ko.selectExtensions.readValue(t.options[t.selectedIndex])!==d[0]:d.length||t.selectedIndex>=0,e&&ko.utils.triggerEvent(t,"change")}}),ko.utils.ensureSelectElementIsRenderedCorrectly(t),u&&Math.abs(u-t.scrollTop)>20&&(t.scrollTop=u)}},ko.bindingHandlers.options.optionValueDomDataKey=ko.utils.domData.nextKey()}.call(e),t})})(this);